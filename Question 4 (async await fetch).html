<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question 4</title>
</head>

<body>
    <script>
        console.log("Question 4 - Asynchronous Programminig and Error Handling");
        console.log("Input fetch(url) - https://jsonplaceholder.tpicode.com/posts ");
        console.log("Output :- return array of 5 titles of the first 5 posts");

        // url intialization
        let url = "https://jsonplaceholder.typicode.com/posts";

        // async function where fetch is used to get data from api
        async function fetching() {
            try {
                let res = await fetch(url);
                if (res.status == 200) {
                    // if status is 200 then only the data will be printed
                    let data = await res.json();
                    printTitle(data);
                }
                else {
                    // if status is not equal to 200 then Error will be thrown
                    throw new Error(`Error Caught while fetching data, Status - ${res.status}`);
                }
            }
            catch (e) {             // error will be catched here
                console.log(e);
            }
        }

        // function for printing data if DATA is fetched properly
        function printTitle(data) {
            let outputArr = [];                              // Output Array - empty 
            for (let i = 0; i < 5; i++) {
                outputArr.push(data[i].title);         // pushing titles of the first 5 posts to the output Array
            }
            console.log(outputArr);              // console printing here
        }

        // calling fetching function
        fetching();
    </script>
</body>

</html>